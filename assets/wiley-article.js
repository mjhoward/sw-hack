WILEY.define("wiley-article",function(){}),WILEY.define("configuration/add-this",[],function(){"use strict";var e="ra-51225be51b56b4c4";return{id:e,url:"//s7.addthis.com/js/300/addthis_widget.js#pubid="+e}}),WILEY.define("modules/alt-metrics",["common/modules/jquery-loader","common/modules/events","common/facades/pubsub"],function(e,t,n){"use strict";var r=function(t){this.element=e(t),this.setEvents()};return r.prototype={getMetrics:function(){e.getScript("https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js")},setEvents:function(){var r=t.categories;n.subscribe(r.state.on,e.proxy(this.setAlignment,this)),n.subscribe(r.app.start,e.proxy(this.getMetrics,this))},setAlignment:function(t){var n=/xxs/.test(t)?"bottom":"right";window._altmetric&&this.element.attr("data-badge-popover")!==n&&(this.element.attr("data-badge-popover",n),e(".altmetric-embed.popover").hide().remove(),this.element.empty().removeAttr("data-uuid"),window._altmetric.badges={},window._altmetric_embed_init())}},r}),WILEY.define("modules/article-nav",["common/modules/jquery-loader","common/modules/utilities","common/facades/pubsub","common/facades/scrollable"],function(e,t,n){"use strict";var r=e("#article-nav"),i=r.parents(".article-tools__list"),s=r.children(".article-tools__article-nav-scrollpane"),o=e(".js-journal"),u=e(".footer--wiley"),a=e(".footer--hub, .clib-footer"),f=e(window),l=r.find(".icon__chevron"),c=e("#article-nav-menu"),h=c.next(".js-icon__tools--article-nav"),p=c.find(".article-tools__item-link-text"),d={active:"article-tools__article-nav-item-link--is-active",chevron:"icon__chevron--visible",hidden:"is-hidden",item:"article-tools__article-nav-item",link:"article-tools__article-nav-item-link",navigation:"article-tools__item-link-text--active",section:"article-tools__article-section--is-active"},v=function(){var t=0;return u.each(function(){t+=Math.round(e(this).outerHeight(!0))}),t}(),m=!1,g,y=function(){var e=r.find("."+d.active),t=s.scrollable("isScrollable"),n,i,o;t&&e.length?(n=e.position().top+e.outerHeight(),o=parseInt(s.css("height"),10),i=Math.abs(parseInt(s.scrollable("content").css("top"),10)),(n<i||n>o+i)&&s.scrollable("scroll",e)):t&&!e.length&&f.scrollTop()===0&&s.scrollable("scroll",0)},b=function(){s.scrollable("destroy")},w=function(e){b(),s.css(e),s.clearQueue(),s.queue(function(){s.scrollable(),y()})},E=function(){var n=f.height(),r=["application.ready","resizing","scrolling.finished","accordion.slideUp.complete"],s=a.length>0?t.isInViewport(a):t.isInViewport(u),l=e("#js-article-tools"),c=80,h,p;if(t.getDockHeightInViewM()&&g==="default"){if(s){if(m||this&&e.inArray(this.event,r)>-1)m=!1}else m||(m=!0);h=n-130}else p=Math.round(o.offset().top)+parseInt(i.css("marginTop"),10),h=n-(p+c)+e(window).scrollTop(),m=!1;h&&w({"max-height":h}),S()},S=function(){var n=f.height(),r=e("#js-article-tools"),i=a.length>0?a.outerHeight():0,s=a.length>0?t.isInViewport(a):t.isInViewport(u),o=a.length>0?a.offset().top:u.offset().top,l=20,c=e(document).height()-e(window).scrollTop()-e(window).height(),h,p;t.getDockHeightInViewM()&&g==="default"&&s&&r.outerHeight()>o-e(window).scrollTop()?(h=u.outerHeight()+i-c+l,p="auto"):(h="",p=""),r.css({bottom:h,top:p})},x=function(i){g="default",this.root=e(i),this.model=this.articleNavModel(),this.scrollDuration=1500,this.animationDuration=500,this.fromClick=!1,this.clickedElm=null;var o=this,u=function(t){g=t,g==="panel"?(r.addClass(d.hidden),c.off("click").on("click",e.proxy(o.togglePanel,o))):(c.off("click"),r.removeClass(d.hidden),b(),s.removeAttr("style"),E())},a=function(){h.hide(),p.removeClass(d.navigation),l.removeClass(d.chevron).removeAttr("style"),r.addClass(d.hidden).removeAttr("style"),t.bodyClick(!1,"click.articleNav touchstart.articleNav")},f=function(e){var t=e==="panel"?"default":"panel";g===t&&a(),u(e)},v=function(t){var n=e(t.target).attr("href"),r;if(n){e(n).hasClass("article-section__references")&&(n="#"+e(n).find(".bibSection").eq(0).attr("id")),o.fromClick=!0;for(r=0;r<o.model.length;r++)o.model[r].id===n.replace(/^#/,"")&&(o.clickedElm=o.model[r]);o.setMenuItem(o.clickedElm)}};n.subscribe({"scrolling.finished":function(){o.setMenuItem(o.getViewportElement())},"application.ready":E,resizing:E,"state.match":function(e){var t="unsubscribe",r="panel";/l/.test(e)&&(t="subscribe",r="default"),f(r),n[t]("scrolling.finished",E),n[t]("accordion.slideUp.complete",E),n[t]("scrolling",S)}}),r.on("click",v),t.isIE(8)||e(".article-footer").on("click",".js-footer-control",v)};return x.prototype={togglePanel:function(n){var i=this;n&&n.preventDefault(),r.hasClass(d.hidden)?(p.addClass(d.navigation),h.fadeIn(i.animationDuration),r.fadeIn(i.animationDuration,function(){r.removeClass(d.hidden),w({height:150}),m=!1,t.bodyClick(!0,"click.articleNav touchstart.articleNav",function(t){var n=e(t.target);n.closest("#article-nav").length===0&&!n.is("#article-nav")&&i.togglePanel()})})):(h.hide(),p.removeClass(d.navigation),r.fadeOut(i.animationDuration,function(){r.removeAttr("style").addClass(d.hidden),t.bodyClick(!1,"click.articleNav touchstart.articleNav")}))},setMenuItem:function(){var t;return function(n){if(!n||!n.menuItem)return t=null,!1;var i=e(n.menuItem),s,o;if(t===n)return!1;s=e("#"+n.id),t=n,r.find("."+d.active).removeClass(d.active),i.addClass(d.active),e("."+d.section).removeClass(d.section),s.addClass(d.section),o=Math.round(g==="default"?i.position().top:i.position().top+3),Modernizr.csstransitions?l.css("top",o):parseInt(l.css("opacity"),10)<1?l.css({top:o,opacity:"1"},0):l.animate({top:o},50),y(),l.addClass(d.chevron)}}(),validateAnchor:function(t){var n=document.getElementById(t),r=e(n),i=r.length?{element:n}:!1;return i},resetMenuItems:function(){var t=e("."+d.active),n=e("."+d.section);return function(){if(e("html:animated, body:animated").length)return!1;t.removeClass(d.active),n.removeClass(d.section),l.removeClass(d.chevron)}}(),articleNavModel:function(){var t=[],n,r,i,s,o,u=this.root.find(".js-scrollto");if(u.length)for(n=0;r=u[n];n++)i=e(r).attr("href").split("#")[1],s=this.validateAnchor(i),s&&(o=e(s.element).offset().top,t.push({anchorContent:s,id:i,menuItem:r,top:o}));return t},getViewportElement:function(){var t,n,r=null,i,s,o=e(".article-tools__article-nav-item"),u=null,a=parseInt(e(".article-section").eq(0).css("margin-bottom"),10),f=this,c=e(window).height()*.5,h=0,p=e("#js-article-tools");g==="panel"&&(p.length&&(h=p.outerHeight()),c+=h);if(f.fromClick)f.fromClick=!1,r=f.clickedElm;else{for(n=0;t=this.model[n];n++){s=document.getElementById(t.id);if(r===null){i=s&&s.getBoundingClientRect();if(i&&i.top<=c&&i.bottom+a>=c*.5){r=t;break}}}r===null&&l.removeClass(d.chevron).removeAttr("style")}return r}},x}),WILEY.define("modules/author-manuscript",["common/modules/jquery-loader","common/modules/modal","common/modules/utilities","common/facades/pubsub"],function(e,t,n,r){var i={container:"author-manuscript-cnt",iframeId:"pdfAuthorManuscript"},s={error:"Error",loading:"Loading...",retry:"There was a technical error, please try again."},o=function(t){var n=this;n.element=e(t),n.element.off().on("click",e.proxy(n.openPDF,this)),n.options={title:s.loading,fixedPane:!0,showCloseButton:!0},r.subscribe({resizing:e.proxy(n.resize,this)})};return o.prototype={getTemplate:function(){var n=this.element.attr("href"),r=e.get(n);this.options.html="",this.options.title=s.loading,this.options.onstart=e.proxy(function(){(this.isMobileView()||Modernizr.touch)&&e(".mobile-panel__header").hide()},this),t.open(this.options),r.done(e.proxy(function(t){this.html='<div class="'+i.container+'">'+t+"</div>",this.options.html=this.html,this.options.title="Author Manuscript";if(this.isMobileView()||Modernizr.touch)location.href=e(t).attr("src")},this)),r.fail(e.proxy(function(){error=Fragment.getTemplate().replace("{{title}}",s.error).replace("{{content}}","<p>"+s.retry+"</p>"),this.options.html=error,this.options.title=s.error,this.options.resize=!1},this)),r.always(e.proxy(function(){t.update(this.options),this.resizeIframe()},this))},openPDF:function(e){e.preventDefault(),this.getTemplate()},resizeIframe:function(){var t=e("#cboxContent").outerHeight(),n=e("#cboxTitle").outerHeight();e("."+i.container).css({height:t-n,paddingTop:n})},resize:function(){e("#"+i.iframeId).is(":visible")&&this.resizeIframe()},isMobileView:function(){return/small/.test(n.getViewState())}},o}),WILEY.define("modules/add-this",["common/modules/jquery-loader","common/modules/controller","common/facades/pubsub","common/modules/utilities","configuration/add-this"],function(e,t,n,r,i){"use strict";var s={access:"is-accessible",active:"add-this--active",align:"align--right",addthis:{button:"addthis_button_",footer:"add-this__footer",list:"add-this__list",toolbox:"addthis_toolbox addthis_default_style addthis_32x32_style",wrapper:"add-this",extra:"add-this__footer-link"},icon:{api:"icon__addthis",name:"icon",privacy:"icon__privacy",tool:"icon__tool",share:"icon__tool--share"},id:"share-this",js:"js-module",label:"article-tools__tool-text",link:"article-tools__tool-link",list:"article-tools__tool--share",lists:{inline:"u-horizontal-list",plain:"u-list-standard"},overlay:"overlay__content modal__content",title:"overlay__title",plan:"u-list-plain"},o={},u={twitter:"Twitter",mendeley:"Mendeley",facebook:"Facebook",researchgate:"ResearchGate",diigo:"Diigo",email:"Email",more:"Settings"},a={label:"Share",privacy:"Privacy",tool:"AddThis"},f={doi:"",pubid:i.id},l={homepage:"http://www.addthis.com/website-tools/overview",privacy:"http://www.addthis.com/privacy/privacy-policy",share:"http://"+window.location.host+"/resolve/doi"},c=function(e){return e=decodeURIComponent(e),e},h=function(e){var t="",n;switch(e){case"link":t+='<a class="'+s.link+" "+s.js+'" ',t+='data-overlay="medium" ',t+='data-body="paddless" ',t+='data-module="common_overlay" ',t+='data-title="'+a.label+'" ',t+='href="#'+s.id+'">',t+='<span class="'+s.icon.name+" "+s.icon.tool+" "+s.icon.share+'"></span>',t+='<span class="'+s.label+'">'+a.label+"</span>",t+="</a>";break;case"addthis":t+="<li>",t+='<a href="#" ',t+='addthis:url="'+c(l.share)+"?DOI="+f.doi+'" ',t+='class="'+s.addthis.button+'{service}">',t+="{label}",t+="</a>",t+="</li>";break;case"footer-links":t+='<div class="'+s.addthis.footer+'">',t+='<ul class="'+s.lists.inline+'">',t+='<li class="'+s.addthis.extra+'">',t+='<a href="'+l.homepage+'" target="_blank">',t+='<span class="'+s.icon.name+" "+s.icon.api+'"></span>',t+=a.tool,t+="</a>",t+="</li>",t+='<li class="'+s.addthis.extra+" "+s.align+' ">',t+='<a href="'+l.privacy+'" target="_blank">',t+='<span class="'+s.icon.name+" "+s.icon.privacy+'"></span>',t+=a.privacy,t+="</a>",t+="</li>",t+="</ul>",t+="</div>";break;case"list":t+='<div id="'+s.id+'" ',t+='class="'+s.overlay+" "+s.js+'"',t+='data-module="add-this">',t+='<div class="'+s.addthis.wrapper+'">',t+='<div class="'+s.addthis.toolbox+' ">',t+='<h2 class="'+s.access+" "+s.title+'">'+a.label+"</h2>",t+='<ul class="'+s.lists.plain+" "+s.id+" "+s.addthis.list+'">';for(n in u)u.hasOwnProperty(n)&&(t+=h("addthis").replace("{service}",n).replace("{label}",u[n]));t+="</ul>",t+="</div>",t+="</div>",t+=h("footer-links"),t+="</div>"}return t},p=function(e){e.preventDefault(),o.list.append(h("list"))},d=function(){window.addthis.toolbox(o.list[0]),o.body.addClass(s.active)},v={link:function(n){o.list=n,o.link=e(h("link")),o.link.one("click",p),t.set(o.link[0]),o.list.prepend(o.link),o.list.removeClass(s.list)},list:function(t){o.body=t,o.list=t.find(".addthis_toolbox "),window.addthis_config=f,window.addthis?d():e.getScript(i.url,d)}};return function(t){var n;t=e(t),n=t.is("li")?"link":"list",f.doi=t.is("li")?t.attr("data-doi"):f.doi,v[n](t)}}),WILEY.define("modules/character-revealer",["common/modules/jquery-loader","common/modules/utilities"],function(e,t){"use strict";var n={additional:"more",on:"Show",off:"Hide"},r=function(t){this.$root=e(t);var n=e.trim(this.$root.html()),r,i;if(n.length<120)return;this.id=this.$root.attr("id")||"#character-revealer-"+(new Date).getTime(),r=n.replace(/.{120}\S*\s+/,"$&@").split(/\s+@/),i=r[0]+'<span class="js-revealer__toggle">'+r[1]+"</span>",this.buildControl(),this.$control.find(".js-revealer__control").on("click",e.proxy(this.toggleCharacters,this)),this.$root.addClass("js-revealer__character").attr("id",this.id).empty().prepend(i),this.$content=this.$root.find(".js-revealer__toggle"),this.setDefaultHeight(),this.$content.addClass("js-revealer__toggle--hidden"),Modernizr.csstransitions||this.$content.slideUp(),this.$root.after(this.$control)};return r.prototype={buildControl:function(){var t="";t+='<span class="js-revealer__control-wrapper">',t+='<button type="button" class="button__link js-revealer__control js-revealer__control--active">',t+='<span class="js-revealer__control-toggle">'+n.on+"</span> ",t+=n.additional,t+="</button>",t+="</span>",this.$control=e(t),this.$toggle=this.$control.find(".js-revealer__control-toggle")},setDefaultHeight:function(){this["default-height"]=this.$content.height()/t.getElementFontSize(this.$content)+"em"},toggleCharacters:function(e){var t,r;this.$content.hasClass("js-revealer__toggle--hidden")?(r=this["default-height"],t=n.off):(r=0,t=n.on),Modernizr.csstransitions?this.$content.css("height",r):this.$content.slideToggle(),this.$content.toggleClass("js-revealer__toggle--hidden"),this.$toggle.text(t)}},r}),WILEY.define("modules/child-revealer",["common/modules/jquery-loader"],function(e){"use strict";var t=function(t){this.$el=e(t),this.init()},n={active:"children-revealer__active",text:"children-revealer__text"},r={articles:" corrected articles",on:"Show all",off:"Show fewer"};return t.prototype={init:function(){var t=this.$el.children();this.show=parseInt(this.$el.attr("data-show"),10),t.length>this.show&&(this.id="child-revealer-"+e.now(),this.$children=t.eq(this.show).nextAll().andSelf(),this.$el.attr("id",this.id),this.buildControl(),this.hideChildren())},buildControl:function(){var t="";t+='<div class="children-revealer__control clear">',t+='<button type="button" class="button__link">',t+='<span class="icon icon__double-chevron--blue"></span>',t+='<span class="'+n.text+'">'+r.on+"</span>",t+=r.articles,t+="</button>",t+="</div>",this.$control=e(t),this.$text=this.$control.find("."+n.text),this.$control.find("button").on("click",e.proxy(this.toggleChildren,this)),this.$el.after(this.$control)},hideChildren:function(){this.$children.slideUp("fast",e.proxy(function(){this.$text.text(r.on)},this))},showChildren:function(){this.$children.slideDown("fast",e.proxy(function(){this.$text.text(r.off)},this))},toggleChildren:function(e){e.preventDefault(),this.$control.hasClass(n.active)?this.hideChildren():this.showChildren(),this.$control.toggleClass(n.active)}},t}),WILEY.define("modules/fragment",["common/modules/jquery-loader","common/modules/modal","common/modules/controller"],function(e,t,n){"use strict";var r={body:"ajax-fragment__body",field:"form__field",form:"form",fragment:"js__ajax-fragment",title:"ajax-fragment__title",off:"ajax-fragment__off",wrapper:"ajax-fragment"},i={error:"Error",loading:"Loading...",retry:"There was a technical error, please try again."},s=function(t){var n;this.element=e(t),this.form=this.element.is("."+r.field)?this.element.closest("."+r.form):!1,n=this.form?"change":"click",this.element.on(n,e.proxy(this.getContent,this)),this.options={title:i.loading,fixedPane:!1,resize:!0,showCloseButton:!0,size:this.element.data("fragment")||"small"}};return s.getTemplate=function(){var e="";return e+='<div class="'+r.wrapper+'" id="'+r.wrapper+'">',e+='<h2 class="'+r.title+'">{{title}}</h2>',e+='<div class="'+r.body+'">{{content}}</div>',e+="</div>",e},s.prototype={getContent:function(o){var u=this.form?this.form.attr("action"):this.element.attr("href"),a=this.form?this.form.serialize():{},f,l;l=e.ajax({cache:!1,data:a,url:u}),o.type==="click"&&o.preventDefault(),this.options.html="",this.options.title=i.loading,t.open(this.options),l.done(e.proxy(function(t){this.html=e(t).find("#"+r.fragment),n.set(this.html),this.options.html=this.html,this.options.title=this.html.find("."+r.title).text()},this)),l.fail(e.proxy(function(){f=e(s.getTemplate().replace("{{title}}",i.error).replace("{{content}}","<p>"+i.retry+"</p>")),this.options.html=f,this.options.title=i.error,this.options.resize=!1},this)),l.always(e.proxy(function(){this.options.html.on("click","."+r.off,e.proxy(this.resetFragment,this)),t.update(this.options)},this))},resetFragment:function(e){e.preventDefault(),t.close()}},s}),WILEY.define("modules/citations",["common/modules/jquery-loader","common/modules/controller","common/modules/modal","modules/fragment"],function(e,t,n,r){"use strict";var i={active:"citations--available",body:"body",count:"js-citations__count",counter:"js-citations__counter",data:"article-header__meta-info-2nd-data",error:"warning",section:"js-citations__section"},s={date:"Last updated",error:"Citations can't be refreshed at this time. Please try again later.",loading:"Retrieving citations",title:" "},o,u=function(t){this.body=e(i.body),this.count=e("#"+i.count),this.element=e(t),this.section=e("#"+i.section),o=parseInt(this.count.text(),10),this.element.one("click",e.proxy(this.getCitations,this))};return u.prototype={getCitations:function(t){var n;t.preventDefault(),this.element.replaceWith(this.getTemplate("loading")),n=e.ajax({cache:!1,url:this.element.attr("href")}),n.done(e.proxy(this.setCitations,this)),n.fail(e.proxy(this.setError,this))},getTemplate:function(t){var n="",r;switch(t){case"date":r=(new Date(e.now())).toDateString(),n+='<span class="'+i.data+'">',n+=s.date+" ",n+='<time datetime="'+r+'">'+r+"</time>",n+="</span>";break;case"error":n+='<p class="'+i.error+'">',n+=s.error,n+="</p>";break;case"loading":n+='<span class="'+i.data+'">',n+=s.loading,n+="</span>"}return this[t]=e(n),this[t]},setCitations:function(n){var r=e(n),s=parseInt(r.find("#"+i.counter).text(),10);switch(s){case 0:o=s,this.body.removeClass(i.active),this.loading.replaceWith(this.getTemplate("date")),this.setCounter(),this.section.empty();break;case o:this.loading.remove();break;default:o=s,this.loading.remove(),this.setCounter(),t.set(r),this.section.empty().prepend(r),this.body.addClass(i.active)}},setCounter:function(){var t=this.count;e({total:t.text()}).animate({total:o},{duration:2e3,easing:"linear",step:function(){t.text(Math.floor(this.total))},complete:function(){t.text(this.total)}})},setError:function(){var e=r.getTemplate();e=e.replace("{{content}}",this.getTemplate("error").prop("outerHTML")),e=e.replace("{{title}}",s.title),this.loading.remove(),n.open({html:e,showCloseButton:!0,showCloseSecondary:!0,size:"extra-small",title:s.title})}},u}),WILEY.define("modules/citation-select",["common/modules/jquery-loader","common/modules/utilities","common/facades/scrollable"],function(e,t){"use strict";var n={form:"#download-citation-form",items:".citation__list__item",select:"#citation__select",textbox:".js__citation"},r={active:"citation__list__item--active"},i={},s=function(t){this.element=e(t),this.form=this.element.find(n.form),this.select=this.form.find(n.select),this.items=this.form.find(n.items),this.textbox=this.form.find(n.textbox),this.display=this.textbox.find("pre"),s.url=this.form.attr("action"),i.text=e.Deferred(),i.text.resolve(e.trim(this.textbox.text())),this.textbox.scrollable(),this.textbox.on("click touchstart",e.proxy(this.getText,this)),this.select.on("change",e.proxy(this.setCitation,this)),this.items.on("click",e.proxy(this.setCitation,this))};return s.getCitation=function(t){var n={"citation-type":t||"text"};return t==="refworks"&&(n["download-citation-abstract"]="Download Citation & Abstract"),i.hasOwnProperty(t)||(i[t]=e.get(s.url,n,"html")),i[t]},s.prototype={getText:function(){t.selectText(this.textbox[0])},setCitation:function(t){var o=e(t.target),u=o.data("value")||o.val();t.preventDefault(),this.display.empty(),s.getCitation(u),i[u].done(e.proxy(function(t){this.display.append(t),this.textbox.scrollable("update"),this.select.val(u),e(n.items).removeClass(r.active),o.addClass(r.active)},this))}},s}),WILEY.define("modules/citation-export",["common/modules/jquery-loader","modules/citation-select","configuration/add-this"],function(e,t,n){"use strict";var r={action:"click touchstart",ready:"addthis.ready"},i={active:"add-this--active",button:"js__export-refworks",doi:"article-info__section-doi-data",form:"add-this__reforks-form",list:"add-this__list",textarea:"citation__refworks",toolbox:"addthis_toolbox"},s={citeulike:"CiteULike",mendeley:"Mendeley",refworks:"RefWorks"},o={pubid:n.id},u={refworks:"http://www.refworks.com/express/ExpressImport.asp?vendor=Wiley&filter=RefWorks%20Tagged%20Format&encoding=65001"},a=function(e){var t="";switch(e){case"addthis":t+="<li>",t+='<a href="#" addthis:url="'+f(window.location.href)+'" class="addthis_button_{service}">{label}</a>',t+="</li>";break;case"refworks":t+="<li>",t+='<form class="add-this__reforks-form" name="ExportRWForm" method="POST" target="RefWorksMain" action="'+u.refworks+'">',t+='<textarea id="'+i.textarea+'" name="ImportData" rows="30" cols="70" class="is-accessible"></textarea>',t+='<button class="js__export-refworks button__link" type="submit" name="Submit">',t+='<span class="icon icon__refworks"></span>',t+=s.refworks,t+="</button>",t+="</form>",t+="</li>"}return t},f=function(e){return e=decodeURIComponent(e),e+=e.substr(-1)!=="/"?"/":"",e},l=function(t){this.element=e(t),this.toolbox=this.element.find("."+i.toolbox),this.list=this.toolbox.find("."+i.list),this.setServices(),this.getServices(),this.textarea=e("#"+i.textarea)};return l.prototype={getServices:function(){window.addthis_config=o,e.getScript(n.url,e.proxy(function(){this.setEvents(),window.addthis.toolbox(this.toolbox[0]),this.setState()},this))},setCitation:function(n){n.preventDefault();var r=t.getCitation(s.refworks.toLowerCase());r.done(e.proxy(function(e){this.textarea.text(e),this.list.find("form").submit()},this))},setEvents:function(){window.addthis.addEventListener(r.ready,e.proxy(this.setState,this)),this.toolbox.on(r.action,"."+i.button,e.proxy(this.setCitation,this))},setServices:function(){var e;for(e in s)s.hasOwnProperty(e)&&e!==s.refworks.toLowerCase()&&this.list.append(a("addthis").replace("{service}",e).replace("{label}",s[e]));this.list.append(a(s.refworks.toLowerCase()))},setState:function(){this.element.addClass(i.active)}},l}),WILEY.define("modules/content-revealer",["common/modules/jquery-loader","common/modules/utilities"],function(e,t){"use strict";var n={on:"See",off:"Hide"},r=function(t){var n="";this.$root=e(t),this.$content=this.$root.find('[data-content="reveal"]'),this.$content.length&&(this.id=this.$root.attr("id")||"additional-author-notes-"+(new Date).getTime(),n+='<button type="button" class="js-revealer__control button__link">',n+='<span class="js-revealer__control-toggle">See</span> ',n+="additional note",n+='<span class="icon icon__double-chevron-up"></span>',n+="</button>",this.$root.addClass("article-header__author-content--with-additional").attr("id",this.id),this.$control=e(n),this.$toggle=this.$control.children(".js-revealer__control-toggle"),this.$icon=this.$control.find(".icon"),this.setDefaultHeight(),this.$content.addClass("js-revealer__content"),this.hideContent(),this.$root.append(this.$control))};return r.prototype={hideContent:function(t){Modernizr.csstransitions?this.$content.removeAttr("style"):this.$content.slideUp("fast"),this.$toggle.text(n.on),this.setState(),this.$control.one("click",e.proxy(this.showContent,this))},setDefaultHeight:function(){this["default-height"]=this.$content.height()/t.getElementFontSize(e("body"))+"em"},setState:function(){this.$content.toggleClass("js-revealer__content--hidden"),this.$icon.toggleClass("icon__double-chevron-down").toggleClass("icon__double-chevron-up")},showContent:function(t){Modernizr.csstransitions?this.$content.css("height",this["default-height"]):this.$content.slideDown(),this.$toggle.text(n.off),this.setState(),this.$control.one("click",e.proxy(this.hideContent,this))}},r}),WILEY.define("modules/feedback",["common/modules/jquery-loader"],function(e){"use strict";var t={access:"is-accessible",button:"button__link",content:"feedback__content",hidden:"feedback--hidden",icon:{base:"icon",off:"icon__window-close"},off:"feedback--minimised",on:"feedback__content-link--open"},n={off:"Close the feedback"},r=function(e){var r="";switch(e){case"icon":r+='<button class="'+t.button+" "+t.icon.base+" "+t.icon.off+'" type="button">',r+='<span class="'+t.access+'">'+n.off+"</span>",r+="</button>"}return r},i=function(n){this.elements={box:e(n)},this.elements.box.hasClass(t.off)||(e.extend(this.elements,{content:this.elements.box.find("."+t.content),on:this.elements.box.find("."+t.on)}),this.elements.content.prepend(r("icon")),this.elements.content.one("click","."+t.icon.off,e.proxy(this.reset,this))),this.elements.box.removeClass(t.hidden)};return i.prototype={reset:function(){this.elements.content.fadeOut(e.proxy(function(){this.elements.on.fadeIn(),this.elements.content.remove()},this)),this.elements.box.animate({height:this.elements.on.outerHeight(),width:this.elements.on.outerWidth()},400)}},i}),WILEY.define("modules/figures",["common/modules/jquery-loader","common/modules/controller","common/modules/utilities","common/vendor/jquery.lazyload"],function(e,t,n){"use strict";var r=e("#js-figure-viewer__link").attr("href")+"#figure-viewer-",i=n.isIE(8);return window.name="article",function(){e(".inline-figure").each(function(n,s){var o=e(s),u=o.find("a"),a=o.find("img"),f={id:o.parent().attr("id"),imgSrc:a.attr("src"),title:u.eq(0).attr("title")};if(o.data("figure-enhanced"))return!1;o.data("figure-enhanced",!0),a.lazyload({event:"figures.load",effect:"fadeIn",skip_invisible:!1}).trigger("figures.load"),u.each(function(n,s){var o=e(s),u="",a=o.attr("href");if(!i){if(n<2)n===0?o.attr("title",f.title+" in figure viewer"):o.text("Open in figure viewer"),u=r+f.id;else{if(!/#f\d$/.test(a))return;u=r+a.match(/f\d$/)[0]}o.attr({href:u,target:"figureViewer"}),t.addApp("modules/figure-viewer-modal",s)}else o.attr({target:"_blank"})})})}}),WILEY.define("modules/figure-panning",["common/modules/jquery-loader"],function(e){"use strict";var t;return function(){if(t)return t;var n=e(document),r=["top","right","bottom","left"],i=["clientY","clientX"],s=[!1,!0,!0,!1],o=["top","left","top","left"],u=["height","width","height","width"],a={};return t=function(t){function v(){return{clientX:0,clientY:0}}function m(t){var n=l[f()-1];e.each(v(),function(r){n[r]=t[r]})}function g(){var t={};return e.each(["height","width"],function(e,n){t[n]=d.getBox()[n]>p.getBox()[n]}),t.both=t.height&&t.width,t.either=t.height||t.width,t}function y(t,n,r){var i={},s=g();e.each(t,function(n){var r=o[n];s[u[n]]&&(i[r]=parseInt(d.css(r),10)+t[n])}),n?d.animate(i,{queue:!1,complete:r}):d.css(i)}function b(){var t={},n=p.getBox(),i=d.getBox();e.each(r,function(r,a){var f=i[a]>n[a],l=s[r]?!f:f,c=u[r],h=0;if(!l||i[c]<=n[c])return;s[r]&&(h=n[c]-i[c]),t[o[r]]=h});if(e.isEmptyObject(t))return;d.stop().animate(t)}function w(t){t.preventDefault(),t.originalEvent&&t.originalEvent.touches&&(t=t.originalEvent.touches[0]);var n=e.map(i,function(n){return t[n]-l[0][n]});if(!n)return;y(n,!1),m(t)}function E(){f(-1),n.off("mousemove touchmove mouseup touchend");if(f()===0)return b();if(f()===1)return n.on("mousemove touchmove",w)}function S(e,t){y([t.clientY,t.clientX],!0,function(){b()})}function x(e,t){var n=g();(t.clientX!==0&&n.width||t.clientY!==0&&n.height)&&p.trigger("panClick",t)}var a=this,f=function(){var e=0;return function(n){return n&&(e=Math.max(0,Math.min(2,e+~~n))),e}}(),l=[v(),v()],c,h,p=t.$figureZoomer,d=p.find("img");c=function(){function i(){t=!1}var e=["Out","In"],t=!1,r=250;return function(o){var u=o.originalEvent.scale,a=Math.min(1,Math.max(0,Math.floor(u)));o.preventDefault();if(u===1||t===!0)return;p.trigger("figureZoomer.zoom"+e[a]),n.off("touchend.doubleTap"),setTimeout(i,r)}}(),h=function(){return function(t){if(!g().either)return;t.preventDefault(),f(1),n.on("mouseup touchend",E),m(t);if(f()===1)return n.on("mousemove touchmove",w)}}(),p.on("mousedown touchstart",h).on("gestureend",c).on("panClick",S),t.$component.on("panBy",x)},t}()}),WILEY.define("modules/figure-image",[],function(){"use strict";var e=function(t){this.$image=t,this._physicalImageMetrics={width:t.width(),height:t.height()},this._renderedHeight=null,this._renderedWidth=null,this._renderedPosition=null};return e.prototype={calcWidthFromHeight:function(e){return e*this.getRatio()},calcHeightFromWidth:function(e){return e/this.getRatio()},setRenderedSizeByHeight:function(e){this._renderedHeight=Math.floor(e),this._renderedWidth=this.calcWidthFromHeight(this._renderedHeight)},setRenderedSizeByWidth:function(e){this._renderedWidth=Math.floor(e),this._renderedHeight=this.calcHeightFromWidth(this._renderedWidth)},getRatio:function(){return this._physicalImageMetrics.width/this._physicalImageMetrics.height},getRenderedWidth:function(){return this._renderedWidth},setRenderedWidth:function(e){this._renderedWidth=e},getRenderedHeight:function(){return this._renderedHeight},setRenderedHeight:function(e){this._renderedHeight=e},getPhysicalWidth:function(){return this._physicalImageMetrics.width},getPhysicalHeight:function(){return this._physicalImageMetrics.height},setRenderedPositionFromViewPortMetric:function(e){var t=e.width/2-this.getRenderedWidth()/2,n=e.height/2-this.getRenderedHeight()/2;this._renderedPosition={x:t,y:n}},getRenderedPosition:function(){return this._renderedPosition},setRenderedPosition:function(e){this._renderedPosition=e},getImage:function(){return this.$image},getMetrics:function(){return this._physicalImageMetrics}},e}),WILEY.define("modules/zoomed-image-data",[],function(){"use strict";var e=function(e){this.preZoomTop=e.top,this.preZoomLeft=e.left,this.preZoomWidth=e.width,this.preZoomHeight=e.height,this.actualWidth=e.actualWidth,this.actualHeight=e.actualHeight,this.currentPositionTop=this.preZoomTop,this.currentPositionLeft=this.preZoomLeft,this.currentWidth=this.preZoomWidth,this.currentHeight=this.preZoomHeight,this.newPositionTop=null,this.newPositionLeft=null,this.newWidth=null,this.newHeight=null},t=function(){this.newPositionTop=this.currentPositionTop-Math.round((this.newHeight-this.currentHeight)/2),this.newPositionLeft=this.currentPositionLeft-Math.round((this.newWidth-this.currentWidth)/2),this.currentWidth=this.newWidth,this.currentHeight=this.newHeight,this.currentPositionTop=this.newPositionTop,this.currentPositionLeft=this.newPositionLeft},n=function(){this.currentPositionTop=this.preZoomTop,this.currentPositionLeft=this.preZoomLeft,this.currentWidth=this.preZoomWidth,this.currentHeight=this.preZoomHeight,this.newPositionTop=null,this.newPositionLeft=null,this.newWidth=null,this.newHeight=null};return e.prototype={zoomDataInBy:function(e){var n=e+1;this.newHeight=this.currentHeight*n,this.newWidth=this.currentWidth*n,t.call(this)},zoomDataOutBy:function(e){var n=e+1;this.newHeight=this.currentHeight/n,this.newWidth=this.currentWidth/n,t.call(this)},getPosition:function(){return{x:this.currentPositionLeft,y:this.currentPositionTop}},setPosition:function(e){this.currentPositionTop=e.y,this.currentPositionLeft=e.x},setPreZoomTop:function(e){this.preZoomTop=e},resetImageData:function(){n.call(this)}},e}),WILEY.define("modules/figure-component",["common/modules/jquery-loader","modules/figure-viewer","modules/figure-image","modules/zoomed-image-data","modules/figure-panning","common/vendor/jquery.mousewheel"],function(e,t,n,r,i){"use strict";var s;return s=function(t){var r=this,i=e("#"+t),s=i.find("img.figure-viewer__figure-image"),o=s.data("zoomer-class"),u=e("<div />").attr("class",o);s.wrap(u),r.$component=i,r.$figureZoomer=s.parent(),r.$image=s,r.figureImage=new n(s),r.animating=!1,r.animationEasing="swing",r.animationDuration=300,r.panningInvoked=!1,r.zoomImageData=null,r.zoomerImageURL=s.data("figure-zoomer-img"),r.zoomIncrement=.25,r.zoomInLimitedReached=!1,r.zoomMode=!1,r.zoomOutLimitedReached=!1,r.$figureZoomer.on("mousewheel",function(){r.mouseWheelEventHandler.apply(r,Array.prototype.slice.call(arguments,0))}),r.$figureZoomer.on("figureImage.viewPortChange",e.proxy(r.viewPortChangeEventHandler,r)),r.$figureZoomer.on("figureZoomer.zoomIn",e.proxy(r.zoomInEventHandler,r)),r.$figureZoomer.on("figureZoomer.zoomOut",e.proxy(r.zoomOutEventHandler,r)),r.$figureZoomer.on("figureZoomer.loadZoomerImage",e.proxy(r.loadZoomImageEventHandler,r)),r.$component.on("click",".figure-viewer__figure-zoom-in, .figure-viewer__figure-zoom-out, .figure-viewer__caption-tools-hider",e.proxy(r.figureControls,r))},s.prototype={figureControls:function(t){t.preventDefault();var n=e(t.currentTarget),r=n.closest(".figure-viewer__figure-container").find(".js-figure-zoomer"),i;n.hasClass("figure-viewer__figure-zoom-in")?i="figureZoomer.zoomIn":n.hasClass("figure-viewer__figure-zoom-out")?i="figureZoomer.zoomOut":n.hasClass("figure-viewer__caption-tools-hider")&&(e("#js-figure-viewer").toggleClass("caption-hidden"),i="figureImage.viewPortChange"),r.trigger(i)},show:function(t){var n=this,r=t.delay||0,i=t.animate||!1,s=t.fixZoom||!1,o=t.callback||null,u=e("#js-figure-viewer").find(".figure-viewer__horizontal-figures-scroller-container");s||(n.zoomImageData=null,n.resizeRenderedImageToViewPort()),n.setRenderedImagePositionByCurrentViewPort(),n.redrawImage(!1),window.setTimeout(function(){typeof o=="function"?u.scrollTo(n.$component,i,o):u.scrollTo(n.$component,i)},r)},loadImage:function(){this.resizeRenderedImageToViewPort(),this.setRenderedImagePositionByCurrentViewPort(),this.redrawImage(!1),this.animateShow()},initZoomData:function(){var e=this.figureImage.getImage(),t=(e.parent().outerHeight()-e.outerHeight())/2,n=(e.parent().outerWidth()-e.outerWidth())/2,i=e.outerWidth(),s=e.outerHeight(),o=parseFloat(e.css("width"),10),u=parseFloat(e.css("height"),10);this.zoomImageData=new r({top:t,left:n,width:i,height:s,actualWidth:o,actualHeight:u})},resizeRenderedImageToViewPort:function(){var e=t.getMetrics(),n=e.width/e.height,r=this.figureImage.getMetrics(),i;this.figureImage.getRatio()<n?(i=r.height<e.height?r.height:e.height,this.figureImage.setRenderedSizeByHeight(i)):this.figureImage.getRatio()>=n&&(i=r.width<e.width?r.width:e.width,this.figureImage.setRenderedSizeByWidth(i))},setRenderedImagePositionByCurrentViewPort:function(){var e=t.getMetrics();this.figureImage.setRenderedPositionFromViewPortMetric(e)},redrawImage:function(e,t){var n=this,r=n.figureImage,i=r.getRenderedPosition(),s={position:"absolute",top:i.y,left:i.x,width:r.getRenderedWidth(),height:r.getRenderedHeight()};e?r.getImage().animate(s,n.animationDuration,n.animationEasing,t):r.getImage().css(s)},animateShow:function(){var e=this.$figureZoomer.find("img");e.css({opacity:1,visibility:"visible"})},mouseWheelEventHandler:function(t,n,r,i){var s=i>0?"zoomIn":"zoomOut";t.stopPropagation(),t.preventDefault(),e(t.currentTarget).trigger("figureZoomer."+s,{deltaY:i})},zoomInEventHandler:function(){var e=this,t=e.figureImage.getImage();e.panningInvoked||(i(e),e.panningInvoked=!0),e.zoomMode=!0,e.zoomOutLimitedReached=!1,e.animating&&(t.stop(!0,!1),e.animating=!1),e.zoomImageData===null&&e.initZoomData(),e.zoomImageData.zoomDataInBy(e.zoomIncrement),e.figureImage.setRenderedWidth(e.zoomImageData.newWidth),e.figureImage.setRenderedHeight(e.zoomImageData.newHeight),e.figureImage.setRenderedPosition(e.zoomImageData.getPosition()),e.animating=!0,e.redrawImage(!0,function(){e.zoomImageData.newWidth>e.zoomImageData.preZoomWidth&&e.$figureZoomer.trigger("figureZoomer.loadZoomerImage"),e.animating=!1})},zoomOutEventHandler:function(){var e=this,t=e.figureImage.getImage();if(e.zoomOutLimitedReached)return;e.animating&&(t.stop(!0,!1),e.animating=!1),e.zoomImageData===null&&e.initZoomData(),e.zoomImageData.zoomDataOutBy(e.zoomIncrement),e.zoomImageData.newWidth<=e.zoomImageData.preZoomWidth&&(e.zoomOutLimitedReached=!0,e.zoomMode=!1),e.figureImage.setRenderedWidth(e.zoomImageData.newWidth),e.figureImage.setRenderedHeight(e.zoomImageData.newHeight),e.figureImage.setRenderedPosition(e.zoomImageData.getPosition()),e.animating=!0,e.redrawImage(!0,function(){e.zoomOutLimitedReached?(e.zoomImageData.resetImageData(),e.figureImage.setRenderedPosition(e.zoomImageData.getPosition()),e.resizeRenderedImageToViewPort(),e.setRenderedImagePositionByCurrentViewPort(),e.zoomImageData=null,e.redrawImage(!0,function(){e.animating=!1,e.zoomOutLimitedReached=!1})):e.animating=!1})},viewPortChangeEventHandler:function(e,n){var r=this,i;t.setMetrics(),t.getMetrics(),r.setRenderedImagePositionByCurrentViewPort(),r.zoomImageData&&(i=r.figureImage.getRenderedPosition(),r.zoomImageData.setPosition(i)),n&&n.hasOwnProperty("animateShow")&&n.animateShow===!0?(r.redrawImage(!1),r.animateShow()):r.redrawImage(!0)},loadZoomImageEventHandler:function(){var t=this,n;t.zoomerImageURL&&(n=e('<img class="figure-zoomer__hiddden-image" src="'+t.zoomerImageURL+'" style="display: none;"/>'),t.$figureZoomer.append(n),n.on("load",function(){var e=n.outerWidth(),r=n.outerHeight(),i=setInterval(function(){t.animating||(window.clearInterval(i),t.zoomImageData!==null&&(t.zoomImageData.actualWidth=e,t.zoomImageData.actualHeight=r,t.figureImage.getImage()[0].src=t.zoomerImageURL,t.$figureZoomer.off("figureZoomer.loadZoomerImage")))},10)}))}},s}),WILEY.define("modules/figure-viewer",["common/modules/jquery-loader","common/facades/pubsub","common/modules/modal","common/modules/utilities","modules/figure-component","exports","common/facades/scrollable"],function(e,t,n,r,i,s){"use strict";s=s||{};var o,u,a,f=function(t){var n="figure-viewer__figure-container--active",r=o.find(".figure-viewer__horizontal-figures-scroller-container");r.find("."+n).removeClass(n),e(t).addClass(n)},l=function(t){var n=e(r.getActiveFigureId()),i=n.index(),s={delay:0,animate:!1,fixZoom:t||!1};h(i),a[r.getActiveFigureIdSansHash()].show(s),f(r.getActiveFigureId())},c=function(e){var t=o.find(".figure-viewer__horizontal-figures-scroller"),n=t.find("img");e?Modernizr.csstransitions?(t.css("visibility","visible"),t.css("opacity",1),n.css("visibility","visible")):setTimeout(function(){t.css("visibility","visible"),t.css("opacity",1),n.css("visibility","visible")},300):(t.css({opacity:0,visibility:"hidden"}),Modernizr.csstransitions||n.css("visibility","hidden"))},h=function(e){var t=o.find(".figure-viewer__vertical-figures-wrapper"),n=o.find(".figure-viewer__vertical-figures-container"),r=n.find("li"),i=r.eq(e),s="figure-viewer__figures-item--selected";t.length&&(r.removeClass(s),i.addClass(s),n.scrollable("scroll",parseInt(i.position().top,10)))},p=function(t){var n=e(t.currentTarget),i=n.attr("href"),s=e(i),o=s.find(".figure-viewer__caption-container, .figure-viewer__nav-container"),u=s.index(),l={delay:10,animate:!1,callback:function(){o.fadeIn(1e3)}};t.preventDefault(),h(u),a[i.replace("#","")].show(l),f(i),r.setActiveFigureId(i)},d=function(t){var n=e(t.currentTarget),i=n.attr("href"),s=e(i),o=s.find(".figure-viewer__caption-container, .figure-viewer__nav-container"),u=s.index(),l=e(r.getActiveFigureId()),c=l.find(".figure-viewer__caption-container, .figure-viewer__nav-container"),p={delay:0,animate:!0,callback:function(){o.fadeIn(200)}};t.preventDefault(),h(u),o.fadeOut(0),c.fadeOut(200,function(){a[i.replace("#","")].show(p)}),f(i),r.setActiveFigureId(i)},v=function(e,t){Modernizr.csstransitions?e.css("margin-left",t):e.animate({marginLeft:t},200)},m=function(){var t=o.find(".figure-viewer__figure-container");t.each(function(){e(this).find(".figure-viewer__caption").scrollable("update")})},g=function(e,t,n){var r="Hide",i="icon__chevron-left",s=0,u="icon__chevron-right";t.hasClass("js-figure-viewer__navigation--inactive")||(r="Show",i="icon__chevron-right",s=-t.width(),u="icon__chevron-left"),c(),v(t,s),t.find(".js-display__control-text").text(r),n.find(".icon").addClass(i).removeClass(u),t.toggleClass("js-figure-viewer__navigation--inactive"),o.find(".js-figure-zoomer").first().trigger("figureImage.viewPortChange"),setTimeout(function(){E(),c(!0),l(!0),m(),t.toggleClass("js-figure-viewer__navigation--active")},400),e.preventDefault()},y=function(t){var n="",r;n+='<button type="button" class="figure-viewer__figures-list-control button__link">',n+='<span class="icon icon__chevron-left"></span>',n+='<span class="js-display__control-text">',n+="Hide",n+="</span>",n+='<span class="is-accessible"> figure viewer thumbnails</span>',n+="</button>",r=e(n),r.on("click",function(e){g(e,t,r)}),t.prepend(r)},b=function(){var e=o.find(".figure-viewer__vertical-figures-wrapper"),t=o.find(".figure-viewer__vertical-figures-container"),n=o.find(".figure-viewer__vertical-figures-wrapper:visible").length;e.length&&n&&(e.addClass("js-figure-viewer__navigation--active"),t.scrollable(),y(e),t.on("click","a",p))},w=function(){var t=o.find("figcaption a"),n=o.find(".figure-viewer__figure-container");t.each(function(t,r){r.hash.replace(/^(?:#)(.+)$/,function(t,i){n.each(function(){e(this).get(0).id==="figure-viewer-"+i&&e(r).attr("href","#figure-viewer-"+i).addClass("js-navigate-figure-in-viewer")})})}),o.find("figcaption a.js-navigate-figure-in-viewer").on("click",p)},E=function(){var e=o.find(".figure-viewer__horizontal-figures-scroller-container"),t=o.find(".figure-viewer__figure-container"),n=o.find(".figure-viewer__vertical-figures-wrapper"),r=n.hasClass("js-figure-viewer__navigation--inactive")?o:e,i=t.length*(r.width()+5);o.find(".figure-viewer__horizontal-figures-scroller").css({width:i+"px"}),t.width(r.width())},S=function(){var t=o.find(".figure-viewer__horizontal-figures-scroller-container"),n=t.find("img");n.one("load",function(){var t=e(this),n=t.closest(".figure-viewer__figure-container"),s=n.attr("id");a.hasOwnProperty(s)||(a[s]=new i(s)),a[s].loadImage(),s===r.getActiveFigureIdSansHash()&&l()}).each(function(){this.complete&&e(this).load()})},x=function(){var e=o.find(".figure-viewer__horizontal-figures-scroller");L(),E(),S(),m(),w(),e.on("click",".icon__figure-viewer-arrow",d)},T=function(){window.location.hash=r.getActiveFigureId(),window.location.reload()},N=function(t){var n=e("#figure-viewer .figure-viewer__figure-container--active"),r=".figure-viewer__figure-";switch(t){case"keyboard:right":r+="next";break;case"keyboard:left":r+="previous";break;case"keyboard:up":r+="zoom-in";break;case"keyboard:down":r+="zoom-out"}n.find(r).trigger("click")},C=function(){t.unsubscribe("keyboard:left",N),t.unsubscribe("keyboard:right",N),t.unsubscribe("keyboard:down",N),t.unsubscribe("keyboard:up",N),a=null},k=function(){var e=!!o.parents("[id^=colorbox]").length||!!o.parents("[id=js-mobile-panel]").length;t.subscribe({"keyboard:left":N,"keyboard:right":N,"keyboard:down":N,"keyboard:up":N,"modal.unsubscribe":C}),e||t.subscribe({resizing:T})},L=function(){var e=o.find(".figure-viewer__figure-container").first(),t=e.find(".figure-viewer__figure-image-container"),n=o.find(".figure-viewer__caption-container").first(),r=o.find(".figure-viewer__vertical-figures-wrapper"),i=parseInt(t.css("margin-left"),10),s=parseInt(t.css("margin-right"),10),a=o.width()-i-s,f=e.height();!r.hasClass("js-figure-viewer__navigation--inactive")&&!r.is(":hidden")&&(a-=r.width()),u={width:a,height:f}},A=function(t){return o=e(t),a={},/small/.test(r.getViewState())&&o.addClass("caption-hidden"),/#figure-viewer-/.test(window.location.hash)&&r.setActiveFigureId(window.location.hash),b(),x(),k(),s};return s.setMetrics=function(){L()},s.getMetrics=function(){return u},A}),WILEY.define("modules/figure-viewer-modal",["common/modules/jquery-loader","common/modules/utilities","common/modules/controller","common/facades/pubsub","common/modules/modal","common/vendor/jquery.scrollTo.flesler"],function(e,t,n,r,i){"use strict";var s=e(window),o=s.width(),u=s.height(),a=function(t){var n=e("<div />");return n=n.prepend(e(t)).find("#figure-viewer"),n},f=function(t){i.update({html:t}),e(".js-close-modal-link").on("click",function(e){e.preventDefault(),i.close()})},l=function(){var n=e("#figure-viewer");return n.find("#js-figure-viewer").removeClass("js-break-out-mode").on("click",function(n){var o=e(n.target),u=o.attr("href"),a,f;o.hasClass("figure-viewer__controls-break-out")?(o[0].href+=t.getActiveFigureId(),r.publish("modal.close")):o.hasClass("figure-viewer__controls-close-box")?(n.preventDefault(),r.publish("modal.close")):o.hasClass("js-figure-viewer__navigate-to")&&(n.preventDefault(),r.publish("modal.unsubscribe"),i.close({event:n,callback:function(){var t;e(u).parents(".article-section--data-analyses").length?(t=Modernizr.touch?1e3:1,f=e(".article-section--data-analyses").find(".figureLink[href="+u+"]").first(),a=e(u+":visible").length,a||f.trigger("click"),setTimeout(function(){s.scrollTo(f,400)},t)):s.scrollTo(e(u),400)}}))}),n},c=function(){r.subscribe({resizing:v,"modal.close":d,"modal.unsubscribe":h,"keyboard:escape":d})},h=function(){r.unsubscribe("resizing",v),r.unsubscribe("modal.close",d),r.unsubscribe("keyboard:escape",d)},p=function(){return e("#js-mobile-panel").length},d=function(){p()||i.close(),r.publish("modal.unsubscribe")},v=function(n){var a=s.width(),f=s.height(),l=Math.abs(a-o),c=Math.abs(f-u),h=t.getActiveFigureId().replace("figure-viewer-","");if(l>10||c>20)r.publish("modal.unsubscribe"),i.close({event:n,callback:function(){e(h).find("a.inline-figure__image-link").trigger("click")}});o=a,u=f},m=function(n){this.$link=e(n),t.isIE(8)?this.$link.attr("target","_blank"):(this.endpoint=this.$link.attr("data-modal-href")||this.$link.attr("href"),this.$link.on("click",e.proxy(this.open,this)))};return m.prototype={open:function(r){var s=t.getAjaxEndPoint(this.endpoint),o=e(r.currentTarget).attr("href"),u=/#figure-viewer-/,h;r.preventDefault(),o.match(u)?h=o.split(u).pop():h=e(".article-section--inline-figure").first().attr("id"),t.setActiveFigureId("#figure-viewer-"+h),i.open({onstart:function(){s.then(function(r,s,o){if(o.getResponseHeader("ACCESS_STATUS")==="FORBIDDEN"){location.reload();return}var u=e(r),h="",p,d;u.find("#figure-viewer")?(p=a(r),d=p.find(".figure-viewer__contents-title").text(),i.update({html:p,titleMobile:/small/.test(t.getViewState())?"Figure Viewer":d}),n.set(p),l(),c()):(h+='<button class="js-close-modal-link button__link">Close this dialog</button>',h="<p>It appears that your session has ended. "+h+", login and try again.</p>",h+="<p>If the problem persists, please notify customer services.</p>",h='<div class="figure-viewer__error-msg">'+h+"</div>",f(h))}).fail(function(){var e="";e+='<button class="js-close-modal-link button__link">Close this dialog</button>',e="<p>There has been an unexpected error. "+e+" and try again.</p>",e+="<p>If the problem persists, please notify customer services.</p>",e='<div class="figure-viewer__error-msg">'+e+"</div>",f(e)})},titleMobile:"Figure Viewer",fixedPane:!0,showCloseButton:!1})}},m}),WILEY.define("modules/toolbar",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities"],function(e,t,n){"use strict";var r={body:e("body"),document:e(document),journal:e(".js-journal"),mobile:{},toolbar:e("#js-article-tools"),viewport:e("#js-viewport-mini"),window:e(window),footerHub:e(".footer--hub, .clib-footer"),footer:e(".footer--wiley"),skyscraper:e("#skyscraper")},i={8:{is:function(){return n.isIE(8)},left:"auto"}},s=r.toolbar.hasClass("toolbar--restricted-access"),o={access:"is-accessible",bar:"article-tools__bar",icon:{active:"icon__tool-toggle--active",base:"icon",toggle:"icon__tool-toggle"},list:"article-tools__list",mobile:{absolute:"article-tools__mobile-toolbar-absolute",absoluting:"article-tools__is-mobile-absolute",active:"article-tools__mobile-toolbar-toggle--active",fixed:"article-tools__is-mobile-fixed",js:"js-mobile-toolbar",list:"article-tools__list--mobile",listed:"article-tools__list--mobile-active",toggle:"article-tools__mobile-toolbar-toggle",toolbar:"article-tools__mobile-toolbar",toolset:"article-tools__tool--set"},fixed:"article-tools__is-fixed"},u={tools:"Article Tools"},a={toolbar:r.toolbar.outerHeight(!0)},f=function(t){var n=["xxs","xs","s","m"];return e.inArray(t,n)>-1},l=function(){return r.viewport.offset().top},c=function(t){var n="";switch(t){case"mobile":n+='<div id="'+o.mobile.js+'" class="'+o.mobile.toolbar+'">',n+='   <div class="'+o.mobile.toggle+'">',n+='       <span class="'+o.icon.base+" "+o.icon.toggle+'"></span>',n+='       <span class="'+o.access+'">'+u.tools+"</span>",n+="   </div>",n+='   <ul class="'+o.bar+" "+o.mobile.list+'"></ul>',n+="</div>"}return e(n)},h=function(){r.toolbar.removeClass(o.fixed),s&&(r.toolbar.removeAttr("style"),N())},p=function(){var e=r.footerHub.length>0?r.footerHub.outerHeight():0,t=r.footerHub.length>0?n.isInViewport(r.footerHub):n.isInViewport(r.footer),i=r.footerHub.length>0?r.footerHub.offset().top:r.footer.offset().top,s=20,o=r.document.height()-r.window.scrollTop()-r.window.height(),u,a;n.getDockHeightInViewM()&&t&&r.toolbar.outerHeight()+r.skyscraper.outerHeight()>i-r.window.scrollTop()?(u=r.footer.outerHeight()+e-o+s+r.skyscraper.outerHeight(),a="auto"):(u="",a=""),r.toolbar.css({bottom:u,top:a})},d=function(){t.unsubscribe("scrolling",M)},v=function(e){e=e.split(".")[2],f(e)?(e==="xxs"&&g(),m()):d()},m=function(){Modernizr.touch?(r.document.off("touchstart touchmove",C),r.document.off("scroll",C),r.toolbar.removeClass(o.mobile.absoluting).css("top","auto"),r.toolbar.off("touchstart touchmove",k)):(t.unsubscribe("scrolling",y),t.unsubscribe("resizing",y),r.toolbar.removeClass(o.fixed).removeAttr("style"))},g=function(){r.toolbar.find("."+o.bar).prepend(r.mobile.wrap.find("."+o.mobile.toolset)),r.mobile.toolbar.remove(),r.mobile={},r.document.off("touchstart touchmove scroll",x),t.unsubscribe("resizing",x)},y=function(){var e,t;n.getPositionWin()>l()?(e="addClass",t=r.journal.width()+2,r.toolbar.css({width:t})):(e="removeClass",r.toolbar.removeAttr("style")),r.toolbar[e](o.fixed),T()},b=function(){r.toolbar.addClass(o.fixed),s&&N()},w=function(){t.subscribe({"orientation.change":function(){r.body.hide().fadeIn("fast",function(){r.document.trigger("touchstart")})},"state.match":L,"state.unmatch":v,"toolbar.docked":b,"toolbar.scrolled":h})},E=function(){var e=r.mobile;e.toolbar=c("mobile"),e.toggle=e.toolbar.find("."+o.mobile.toggle),e.wrap=e.toolbar.find("."+o.mobile.list),e.wrap.append(r.toolbar.find("."+o.mobile.toolset)),r.viewport.append(e.toolbar),e.toggle.on("click",S),Modernizr.positionfixed?e.toolbar.show():(r.document.on("touchstart touchmove scroll",x),t.subscribe("resizing",x),setTimeout(function(){r.document.trigger("scroll")},100))},S=function(){var e=r.mobile,t;e.toggle.toggleClass(o.mobile.active),e.toggle.find("."+o.icon.toggle).toggleClass(o.icon.active),Modernizr.csstransitions?e.wrap.toggleClass(o.mobile.listed):(t=e.toggle.hasClass(o.mobile.active)?0:-r.viewport.width(),e.wrap.animate({left:t}))},x=function(){var e=r.window.height(),t=r.window.scrollTop(),n=r.viewport.offset().top,i=e<=n+50&&t<80?25:t-n+e-13;r.mobile.toolbar.hide().addClass(o.mobile.absolute).css({top:i}).fadeIn("fast")},T=function(){},N=function(){var e=r.journal.width()+2;r.toolbar.css({width:e,left:"50%",marginLeft:"-"+e/2+"px"})},C=function(e){var t={window:n.getPositionWin(),view:l()},i=t.window>t.view,s="removeClass",u={top:r.toolbar.outerHeight()*-1};i&&(s="addClass",u={top:t.window-t.view-r.toolbar.outerHeight()}),Modernizr.positionfixed?(r.toolbar[s](o.mobile.fixed),i?N():r.toolbar.removeAttr("style")):e.type!=="touchstart"&&e.type!=="touchmove"||!i?r.toolbar[s](o.mobile.fixed).css(u).fadeIn("fast"):r.toolbar.hide()},k=function(e){e.stopPropagation()},L=function(e){e=e.split(".")[2],f(e)?(e==="xxs"&&E(),a.toolbar=r.toolbar.outerHeight(!0),A()):(a.toolbar=0,M())},A=function(){Modernizr.touch?(r.toolbar.on("touchstart touchmove",k),r.document.on("touchstart touchmove scroll",C),r.document.trigger("scroll")):(t.subscribe("scrolling",y),t.subscribe("resizing",y),t.publish("scrolling"))},O=function(){var e,s;n.getDockHeightInViewM()?r.toolbar.hasClass(o.fixed)||(e="toolbar.docked"):e="toolbar.scrolled",p(),e&&t.publish(e),i[8].is()&&(s="auto",r.toolbar.hasClass(o.fixed)&&r.window.scrollLeft()>0&&(s=r.window.scrollLeft()*-1),s!==i[8].left&&(r.toolbar.css("marginLeft",s),i[8].left=s))},M=function(){O(),t.subscribe("scrolling",O)},_=function(){w(),s&&A()};return _.getHeight=function(){return a.toolbar},_}),WILEY.define("modules/footer",["common/modules/jquery-loader","common/modules/accordion","common/facades/pubsub","modules/toolbar","common/vendor/jquery.scrollTo.flesler"],function(e,t,n,r){"use strict";var i=function(r){var i=this;i.duration=500,n.subscribe({"footer.expand":function(r){t.expand(r.elements,i.duration),r.title&&e(r.title).addClass("js-footer-title--active"),n.once("accordion.slideDown.complete",function(){var t=e(r.elements).hasClass("js-footer-control")?e(r.elements).closest(".article-footer__section"):e(r.target);i.doTheScroll(t)})},"footer.collapse":function(n){t.collapse(n.elements,i.duration),n.title&&e(n.title).removeClass("js-footer-title--active")}}),n.subscribe({"target-footer-toggle-section":function(t){var n=e(t.scrollTarget);e(t.currentTarget).closest(".js-footer-title").length?i.toggleSection(n):i.expand(n)}}),i.setControls(r),i.collapseAll(r)};return i.prototype={doTheScroll:function(t,n){var i=this,s=r.getHeight();s>0&&(t=t.offset().top-s+"px"),e.scrollTo(t,i.duration,function(){n&&typeof n=="function"&&n()})},toggleSection:function(e){var t,r={title:e.hasClass("js-footer-title")?e:e.find(".js-footer-title"),elements:e.find(".js-footer-info"),target:e};r.elements.length&&(t=r.title.hasClass("js-footer-title--active")?"collapse":"expand",n.publish("footer."+t,r))},expand:function(e){var t=e.closest(".article-footer__section"),r=t.length?t.find(".js-footer-title"):e.find(".js-footer-title"),i=t.length?t.find(".js-footer-info"):e.find(".js-footer-info"),s={title:r,elements:i,target:e};s.elements.length&&s.elements.is(":hidden")?n.publish("footer.expand",s):this.doTheScroll(e)},setControls:function(t){var n=e(t),r=n.find(".js-footer-title");r.each(function(){var t=e(this),n=t.parents("[id]").attr("id");t.wrapInner('<a href="#'+n+'" class="js-scrollto js-footer-control" data-scroll-to-target="'+n+'" />')}),Modernizr.touch||e(".js-footer-control").addClass("js-footer-control--hover")},collapseAll:function(t){var r=this,i;e(t).find(".js-footer-title").each(function(){i={},i.elements=e(this).next(".js-footer-info"),i.elements.length&&n.publish("footer.collapse",i)})}},i}),WILEY.define("modules/notes",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities","common/modules/mobile-panel","common/modules/controller","common/facades/scrollable"],function(e,t,n,r,i){"use strict";var s=e("body"),o=e("#main-content"),u=e("body").data("initTableScroll"),a={link:"js-link__note--active",tooltip:"note-tooltip--active"},f=function(t){var n=t?e(t.target):!1,r=!0;return n&&n.hasClass("icon__close")?(t.preventDefault(),t.stopPropagation()):n&&n.closest(".note-tooltip").length?r=!1:t&&t.type==="keyup"&&t.which!==27&&(r=!1),r},l=!1,c=!1,h=function(t){var n;if(e(t).hasClass("article-section__footnotes")&&!l)n=e(".js-link__footnote"),this.name="Footnote",l=!0;else{if(!e(t).hasClass("article-section__notes")||!!c)return;n=e(".js-link__note"),this.name="Note",c=!0}n.on("click",e.proxy(this.showTooltip,this))};return h.prototype={fadeInTooltip:function(){Modernizr.csstransitions||(h.$tooltip.fadeIn("fast"),h.$link.children(".icon__chevron-down").fadeIn("fast")),h.$tooltip.addClass(a.tooltip),h.$link.addClass(a.link),h.$tooltip.find(".icon__close").focus()},fadeOutTooltip:function(t){if(!f(t))return;this.isAnimating=!0,Modernizr.csstransitions?(h.$link.removeClass(a.link),h.$tooltip.removeClass(a.tooltip),setTimeout(e.proxy(this.resetTooltip,this),400)):(h.$link.children(".icon__chevron-down").fadeOut("fast",e.proxy(function(){h.$link.removeClass(a.link)},this)),h.$tooltip.fadeOut("fast",e.proxy(this.resetTooltip,this)),h.$link.removeClass(a.link))},hideTooltip:function(){if(!h.$tooltip)return;h.$link.focus(),h.$link.removeClass(a.link),this.resetTooltip()},openInMobilePanel:function(){var t={content:"<p>"+e(h.$link.attr("href")).html()+"</p>",position:"right",title:this.name+" "+h.$link.text()};r.open(t)},resetTooltip:function(){if(!h.$link)return;h.$link.children(".icon__chevron-down").remove(),h.$tooltip.remove(),delete h.$tooltip,delete h.$link,t.unsubscribe("resizing",this.fadeOutTooltip),s.off("click keyup",this.fadeOutTooltip),this.isAnimating=!1},fixOL23340:function(){var t=h.$tooltip.find(".table__overflow"),n="";t.length&&(u?t.each(function(){n+='<div class="table__overflow js-module" data-module="Table">',n+=e(this).scrollable("content").html(),n+="</div>"}):t.each(function(){n+='<div class="table__overflow">',n+=e(this).html(),n+="</div>"}),t.remove(),h.$tooltip.find(".note-tooltip__wrapper").append(n))},setTooltip:function(){var t="",n=parseInt(o.css("padding-left"),10),r=h.$link.attr("href");t+='<span id="js-note-tooltip" class="note-tooltip">',t+='<span class="note-tooltip__wrapper">',t+='<button type="button" class="icon icon__close button__link">',t+='<span class="is-accessible">Close tooltip</span>',t+="</button>",t+='<span class="icon icon__chevron-down"></span>',t+="</span>",t+="</span>",h.$tooltip=e(t),h.$tooltip.find(".note-tooltip__wrapper").append(e(r).contents().clone(!0)),h.$tooltip.find(".icon__close").on("click",e.proxy(this.fadeOutTooltip,this)),o.append(h.$tooltip),this.fixOL23340(),i.set(h.$tooltip[0]),h.$tooltip.find(".icon__chevron-down").css({left:h.$link.position().left}),setTimeout(function(){h.$tooltip.css({left:n,top:h.$link.offset().top-o.offset().top-h.$tooltip.outerHeight(),width:o.width()})},10)},showTooltip:function(r){var i=e(r.currentTarget),o=n.getViewState(),u=i.hasClass(a.link);r.preventDefault(),r.stopPropagation();if(this.isAnimating)return;this.hideTooltip();if(u)return;h.$link=i;if(/extra-small/.test(n.getViewState())){this.openInMobilePanel();return}this.setTooltip(),this.fadeInTooltip(),s.on("click keyup",e.proxy(this.fadeOutTooltip,this)),t.subscribe("resizing",e.proxy(this.hideTooltip,this))}},h}),WILEY.define("modules/routes",[],function(){"use strict";var e={references:"references"};return e}),WILEY.define("modules/infopane",["common/modules/jquery-loader","common/modules/utilities","common/facades/pubsub","common/modules/mobile-panel","modules/notes","modules/routes","common/modules/router","common/modules/accordion","common/modules/controller","common/facades/scrollable","common/vendor/jquery.colorbox"],function(e,t,n,r,i,s,o,u,a){"use strict";var f={"active-content":"article-support__pane-content--active","active-link":"article-support__item-link--is-active","active-section":"article-support__section--is-active","active-title":"article-support__pane-title-bar--active","open-state":"article-support__list-wrapper--open-pane","section-transition":"article-support__section--is-transition",fixed:"is-fixed",bottom:"is-bottom",hidden:"is-hidden"},l={html:e("html"),window:e(window)},c={8:{is:t.isIE(8),left:"auto"}},h={Information:"Information",PDF_options:"PDF Options",References:"References",Tables:"Tables"},p=function(){var e=this.paneOptions.scrollTo?this.$infoContent.find(this.paneOptions.scrollTo):null;this.$wrapper.addClass(f["open-state"]),this.$infoTitle.parent("div").addClass(f["active-title"]),this.$infoContent.addClass(f["active-content"]),this.setScrollbars(),this.$infoContent.scrollable("scroll",0),this.isOpen=!0,this.$component.addClass("open"),this.isToggling=!1,e&&this.scrollToTarget(e)},d=function(){this.$wrapper.removeClass(f["open-state"]),this.$infoPane.addClass("is-hidden"),this.$infoPane.removeClass("article-support__pane--transform"),this.$infoLinks.removeClass("article-support__links--transform"),this.$infoLinks.removeAttr("style"),this.$infoList.removeAttr("style"),this.$infoContent.scrollable("content").empty(),this.isOpen=!1,this.$component.addClass("closed"),this.isToggling=!1},v=function(){this.$journal=e(".js-journal"),this.$info=e(".js-article-support"),this.$infoContainer=this.$info.closest(".l-article"),this.$infoLinks=this.$info.find(".js-article-support-links"),this.$infoList=this.$infoLinks.find(".js-article-support-list"),this.$infoPane=this.$info.find(".js-article-support-pane"),this.$infoTitle=this.$infoPane.find(".js-article-support-title"),this.$infoContent=this.$infoPane.find(".js-article-support-content"),this.$wrapper=this.$infoLinks.find(".js-article-support-list-wrapper"),this.$pdf=this.$infoList.find('.article-support__item-link[data-support-type="PDF_options"]'),this.$close=this.$infoPane.find(".article-support__pane-close__link")},m=function(t){var n=e(t.currentTarget),r=e(n.prop("hash")),i;t.preventDefault(),r.one("accordionSlideCompleteEvent",e.proxy(this.setScrollbars,this)),r.one("accordionSlideCompleteEvent",function(){i=r.is(":visible")?"addClass":"removeClass",n.children(".icon")[i]("icon__double-chevron-references--expanded")}),u.toggle(r)},g=function(n){var r=e(n);return r.find("h4.reference__title").each(function(t){var n=e(this),r="references-subsection__"+t,i=n.next(".article-info__section-content"),s=e('<span class="icon icon__double-chevron-references--expanded icon__double-chevron-references"></span>');t!==0&&(i.hide(),s.removeClass("icon__double-chevron-references--expanded")),n.wrapInner('<a class="reference__title-link" href="#'+r+'"></a>').children().prepend(s),i.attr("id",r).addClass("js-accordion__body")}),t.getHTML(r)},y=function(n){this.$component=e(n);var r=e(".article-section__references"),i=e(".article-section__references-list"),s=r.find(".js-footer-info").children(".bibSection"),o="";s.length?(s.each(function(){o+=t.getHTML(e(this))}),o=g(o)):i.each(function(){o+=t.getHTML(e(this))}),v.call(this),this.$contentInformation=e(".js-article-info").clone(!0),e(".js-article-info").parents(".article-footer__section").remove(),this.$contentReferences=o,t.uniqueifyHTML(i),this.$contentTables=e(".js-article-tables").clone(!0),e(".js-article-tables").parents(".article-footer__section").remove(),t.uniqueifyHTML(i),this.$component.addClass("closed"),this.isOpen=!1,this.isToggling=!1,this.animationDuration=250,this.paneOptions={},this.infoPaneWidth=this.$infoPane.width(),this.infoLinksMarginR=parseInt(this.$infoLinks.css("margin-right"),10),this.infoPaneMarginT=parseInt(this.$infoPane.css("margin-top"),10),this.infoListWidth=60,this.infoListWidthWide=115,this.init()};return y.prototype={init:function(){var r="click",i=this;n.subscribe({resizing:e.proxy(this.resizeHandler,this),scrolling:e.proxy(this.dockOrScroll,this),"state.unmatch.s":e.proxy(this.resetMobileState,this),"state.unmatch.m":e.proxy(this.resetMobileState,this),"state.unmatch.xs":e.proxy(this.resetMobileState,this),"state.unmatch.xxs":e.proxy(this.resetMobileState,this),"state.match":e.proxy(this.setMatchedState,this),"state.match.s":e.proxy(this.setMobileState,this),"state.match.m":e.proxy(this.setMobileState,this),"state.match.xs":e.proxy(this.setMobileState,this),"state.match.xxs":e.proxy(this.setMobileState,this),"infopane.toggle":e.proxy(this.toggleInfoPane,this),"infopane.hide":e.proxy(this.hideInfoPane,this),"infopane.show":e.proxy(this.showInfoPane,this),"infopane.hideComplete":e.proxy(d,this),"infopane.showComplete":e.proxy(p,this)}),o.set(s.references,function(){e('.js-infopane-toggle[data-support-type="References"]').eq(0).trigger("click")}),this.$infoLinks.on(r,".js-infopane-pdf",{publisher:"infopane.toggle"},function(n){var r;i.$contentPDFoptions=e(".js-pdf-content").children().clone(!0),i.$PDFLinks=i.$contentPDFoptions.find(".box-actions ").find(".js-article-section__pdf-container-link").not(".js-readcube-pdf"),r=i.$contentPDFoptions.find(".box-actions ").find(".js-readcube-pdf"),i.$PDFLinks.length===1&&!/small/.test(t.getViewState())?r.length&&i.reportingEpdf(r):(i.publishOptions(n),i.$EPDFLinks=i.$infoPane.find(".box-actions ").find(".js-readcube-pdf"),i.$EPDFLinks.on("click",function(){i.reportingEpdf(this)}))}),this.changePdfLinks(),e("html").hasClass("readcubeEpdfEnabled")?(e("a.js-standard-pdf").hide(),e("a.js-readcube-pdf").show()):(e("a.js-readcube-pdf").hide(),e("a.js-standard-pdf").show()),this.$infoLinks.on(r,".js-infopane-toggle",{publisher:"infopane.toggle"},e.proxy(this.publishOptions,this)),e(".js-funding-info, .js-publication-history").on(r,{publisher:"infopane.show",type:"Information",scrollTo:!0},e.proxy(this.publishOptions,this)),e(".js-article-support-close").on(r,"a",{publisher:"infopane.hide"},e.proxy(this.publishOptions,this)),e(".js-link__reference").on(r,{publisher:"infopane.show",type:"References",scrollTo:!0},e.proxy(this.publishOptions,this)),this.dockOrScroll(),this.reportingEpdf()},resetMobileState:function(){this.$info.appendTo(e("#js-viewport-mini .l-article-support"))},setMobileState:function(){this.$info.removeClass(f.fixed).prependTo(e("#js-article-tools")).fadeIn("fast")},publishOptions:function(t){t.preventDefault();var r=e(t.currentTarget),i=t.data,s={},o=i.type?i.type:null,u=i.scrollTo?r.attr("href"):null,a=r.data("support-type"),f=i.publisher;a&&(o=a),s.type=o,s.duration=this.animationDuration,s.elm=r,o&&e.extend(s,{content:this["$content"+o.replace("_","")],elm:this.$infoLinks.find('[data-support-type="'+o+'"]'),title:h[o],scrollTo:u}),this.paneOptions=s,n.publish(f,this.paneOptions)},scrollToTarget:function(e){var t=this,r=e.closest(".js-accordion__body"),i=function(){t.setScrollbars(),t.$infoContent.scrollable("scroll",e),setTimeout(function(){e.addClass(f["active-section"]),setTimeout(function(){e.removeClass(f["active-section"])},2e3)},10)};e.addClass(f["section-transition"]),r.length?(n.once("accordion.slideDown.complete",i),u.expand(r),r.prev(".reference__title").find(".icon").toggleClass("icon__double-chevron-references--expanded")):i()},setMatchedState:function(e){this.state=e.replace("state.match.","")},dockOrScroll:function(){var t=e(document).scrollTop(),n=t-this.$journal.offset().top>0,r=t+this.$info.height()>this.$infoContainer.offset().top+this.$infoContainer.height(),i=this.$info.parents("#js-article-tools").length,s=this.$infoContainer.offset().top+this.$infoContainer.height()===0&&!e("#js-article-tools").hasClass("article-tools__is-fixed"),o;r?(!this.isInfoPaneBottom()&&!i&&this.$info.addClass(f.bottom).removeClass(f.fixed),s&&this.$info.removeClass(f.bottom)):n?!this.isInfoPaneDocked()&&!i&&this.$info.addClass(f.fixed).removeClass(f.bottom):this.$info.removeClass(f.fixed,f.bottom),c[8].is&&(o="auto",this.$info.hasClass(f.fixed)&&l.window.scrollLeft()>0&&(o=l.window.scrollLeft()*-1),o!==c[8].left&&(this.$info.css("left",o),c[8].left=o))},isInfoPaneDocked:function(){return this.$info.hasClass(f.fixed)},isInfoPaneBottom:function(){return this.$info.hasClass(f.bottom)},toggleInfoPane:function(){if(this.isToggling)return;this.paneOptions.elm.hasClass(f["active-link"])||this.paneOptions.elm.data("close")==="close"?(this.hideInfoPane(),this.$pdf.focus()):(this.$infoTitle.parent("div").removeClass(f["active-title"]),this.$infoContent.removeClass(f["active-content"]),this.showInfoPane(),this.$close.focus())},showInfoPane:function(){this.stateWhenOpened=this.state,this.isInfoPaneHidden()?this.state==="xxl"||this.state==="xl"||this.state==="l"?(this.prepareInfoPane(),this.openInfoPaneInWideView()):this.openInMobilePanel():this.replaceContentInOpenPane(),i.$tooltip&&i.prototype.fadeOutTooltip()},prepareInfoPane:function(){this.isToggling=!0,this.setInfoPaneHeight(),this.setInfoPaneContent(),this.setinfoLinksHeight(),this.setPositionAndDisplayPane(),this.infoLinksStartWidth=this.$infoLinks.outerWidth()},replaceContentInOpenPane:function(){var e=this.$infoLinks.find("."+f["active-link"]).data("support-type"),t=this.paneOptions.scrollTo?this.$infoContent.find(this.paneOptions.scrollTo):null;this.paneOptions.type!==e?(this.setInfoPaneContent(),n.publish("infopane.showComplete")):(this.isOpen=!0,this.$component.addClass("open"),this.isToggling=!1,t&&this.scrollToTarget(t))},resizeHandler:function(){var e=this;!e.isInfoPaneHidden()&&e.stateWhenOpened!==e.state&&(e.paneOptions.duration=0,e.state.match(/[s]/)||(e.hideInfoPane(),setTimeout(function(){e.showInfoPane()})))},hideInfoPane:function(){this.isToggling=!0,this.$infoList.find("a").removeClass(f["active-link"]),this.state==="l"||this.state==="xl"||this.state==="xxl"?this.closeInfoPaneInWideView():this.closeInfoPaneInTabletView()},isInfoPaneHidden:function(){return this.$infoPane.hasClass(f.hidden)},getPositionLeftHiddenInfoPane:function(){return this.$info.outerWidth()-this.infoPaneWidth-this.infoLinksMarginR},setinfoLinksHeight:function(){var e=l.window.innerHeight();this.$infoLinks.height(e)},setInfoPaneHeight:function(){var n,r=e(".footer--wiley"),i=e(".footer--hub, .clib-footer"),s=i.length>0?i.outerHeight():0,o=i.length>0?t.isInViewport(i):t.isInViewport(r),u=20,a=e(document).height()-l.window.scrollTop()-l.window.height();o?n=l.window.innerHeight()-(r.outerHeight()+s-a+u)-this.$infoLinks.position().top-this.infoPaneMarginT-u:n=l.window.innerHeight()-this.$infoLinks.position().top-this.infoPaneMarginT-120,this.$infoContent.height(n)},setInfoPaneContent:function(){this.$infoTitle.html(this.paneOptions.title),this.$infoContent.scrollable("content").empty().append(this.paneOptions.content),setTimeout(e.proxy(this.bindContentEvents,this),1),this.setActiveButton()},bindContentEvents:function(t){var n=t||this.$infoContent;n.find(".reference__title-link").on("click",e.proxy(m,this)),a.set(n)},setActiveButton:function(){this.$infoList.find("a").removeClass(f["active-link"]),this.paneOptions.elm.addClass(f["active-link"])},setPositionAndDisplayPane:function(){this.$infoPane.removeAttr("style").removeClass(f.hidden)},openInMobilePanel:function(){var t=this;t.paneOptions.type==="PDF_options"&&e(t.paneOptions.content).find(".box-actions ").not(".box-actions--readcube").length===1?t.showPDFNotificationForMobile():r.open({content:t.paneOptions.content,position:"right",title:t.paneOptions.title,scrollTo:t.paneOptions.scrollTo,onstart:function(){t.bindContentEvents(e("#js-mobile-panel"))}})},openInfoPaneInWideView:function(){var e=this;e.$infoPane.addClass("article-support__pane--transform"),e.$infoLinks.addClass("article-support__links--transform"),setTimeout(function(){n.publish("infopane.showComplete")})},closeInfoPaneInWideView:function(){var e=this;e.$infoPane.removeClass("article-support__pane--transform"),e.$infoLinks.removeClass("article-support__links--transform"),setTimeout(function(){n.publish("infopane.hideComplete")})},openInfoPaneInTabletView:function(){var e=this,t=e.$infoLinks.width();e.$infoPane.animate({left:t},e.paneOptions.duration,function(){n.publish("infopane.showComplete")})},closeInfoPaneInTabletView:function(){var e=this,t=e.$infoLinks.width(),r=e.$infoLinks.position().left+t-e.infoPaneWidth;e.$infoPane.animate({left:r},e.paneOptions.duration,function(){n.publish("infopane.hideComplete")})},showPDFNotificationForMobile:function(){var t=this.$contentPDFoptions,n=t.find(".js-article-section__pdf-container-title").text(),r=t.find(".js-article-section__pdf-container-size").text(),i=t.find(".js-article-section__pdf-container-link").attr("href"),s="",o=function(){e.colorbox.close()},u;s+='<div class="pdf-mobile-notification-container">',s+='<p class="pdf-mobile-notification-container__message">',s+=n+"<br />( "+r+" )",s+="</p>",s+='<button class="button button--primary js-button--cancel">Cancel</button>',s+='<button class="button button--primary js-button--ok">Ok</button>',s+="</div>",u=e(s),u.find(".button--primary").one("click",function(t){t.stopImmediatePropagation(),e(t.currentTarget).hasClass("js-button--ok")&&(document.location.href=i),o()}),e.colorbox({arrowKey:!1,closeButton:!1,escKey:!1,fixed:!0,height:161,href:u,inline:!0,onOpen:function(){e("#cboxTitle").addClass("cboxTitle--hidden")},opacity:.4,overlayClose:!1,preloading:!1,transition:"none",width:260})},setScrollbars:function(){this.$infoContent.scrollable("update")},reportingEpdf:function(t){var n=e(t).data("report-path");if(n){var r=new Image(1,1);r.src=n}},changePdfLinks:function(){var t=e(".article-support__item--pdf-solo"),n=e("html").hasClass("readcubeEpdfEnabled"),r=e(".js-readcube-pdf"),i=r.attr("href");t.length&&r.length&&n&&e(".js-infopane-cdsr").attr("href",i)}},y}),WILEY.define("modules/issue-header",["common/modules/jquery-loader"],function(e){"use strict";var t={img:"issue-header__image-link",link:"issue-header__link",hover:"issue-header--hover"},n=function(t){this.$root=e(t),this.hoverJournalLink()};return n.prototype={hoverJournalLink:function(){var e=this,n=e.$root.find("."+t.img),r=e.$root.find("."+t.link);n.add(r).hover(function(){e.$root.addClass(t.hover)},function(){e.$root.removeClass(t.hover)})}},n}),WILEY.define("modules/keyboard-hover",["common/modules/jquery-loader","common/modules/utilities","common/modules/mobile-panel"],function(e,t,n){"use strict";var r={action:"click keyup touchstart",click:"click"},i={"hover-helper":"js-hover-helper","author-content":"article-header__author-content","alt-author-content":"article-header__author-content--alt","active-hover":"js-hover-active","close-infopane":"icon__infopane-close",accessible:"is-accessible"},s={close:"Close author notes"},o={body:e("body")},u=function(t){this.element=e(t),this.setControls(),this.element.on(r.click,".js-hover-helper, .js-hover-closer",e.proxy(this.toggleContent,this))},a=function(e){var t="";switch(e){case"icon":t+='<button type="button" class="js-hover-closer icon icon__infopane-close button__link" title="'+s.close+'">',t+='<span class="'+i.accessible+'">',t+=s.close,t+="</span>",t+="</button>"}return t},f=function(t){var n=t.data;if((t.type==="click"||t.type==="touchstart")&&!e(t.target).closest("."+i["active-hover"]).length||t.which===27)n.removeClass(i["active-hover"]),o.body.off(r.action,f)};return u.prototype={openInMobilePanel:function(e){var t="<h3>"+e.find("."+i["hover-helper"]).text().replace(",","")+"</h3>",r=e.find("."+i["author-content"]).children("div").html(),s={content:t+r,position:"right",title:"Author Information"};n.open(s)},setControls:function(){this.element.find("[data-hover-control]").each(e.proxy(function(t,n){var r=e(n),s=r.attr("data-hover-control"),o=this.element.find('[data-hover-content="'+s+'"]').eq(0),u=r.closest('[data-hover-container="'+s+'"]'),f=a("icon"),l,c;s!==""&&o.length&&(c=s.toLowerCase().replace(" ","-"),o.wrapInner('<div id="'+c+'"/>'),l=r.find("a, small").detach(),r.wrapInner('<button type="button" class="button__link '+i["hover-helper"]+'" />').children("."+i["hover-helper"]).data({container:u,content:o}).after(l),o.prepend(f).children("."+i["close-infopane"]).data({container:u,content:o}))},this))},toggleContent:function(n){var s=e(n.currentTarget),u=s.data("container"),a=u.find("."+i["author-content"]);n.preventDefault();if(u.hasClass(i["active-hover"]))u.removeClass(i["active-hover"]),o.body.off(r.action,f);else{if(/extra-small/.test(t.getViewState())){this.openInMobilePanel(u);return}this.element.find(".js-hover-active .js-hover-helper").not(s).trigger(r.click),u.position().left+a.outerWidth()>u.parent().width()?a.addClass(i["alt-author-content"]):a.removeClass(i["alt-author-content"]),u.addClass(i["active-hover"]),setTimeout(function(){o.body.on(r.action,u,f)},0)}}},u}),WILEY.define("modules/language-select",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities"],function(e,t,n){"use strict";var r={active:"tab__link--active",contents:"article-section__content",links:"language__list-link",list:"js-language__list",menu:"tab__options--active",mobile:"tab__options--mobile",options:"js-language__content"},i=function(t){this.elements={root:e(t)},this.setElements(),this.setContent(this.elements.links.first()),this.setEvents()};return i.prototype={setElements:function(){var t=this.elements.root;e.extend(this.elements,{contents:t.siblings("."+r.contents),links:t.find("."+r.links),list:t.find("."+r.list),options:t.find("."+r.options)})},setHeight:function(){this.height={max:this.elements.list.outerHeight(),min:this.elements.options.outerHeight()}},setEvents:function(){t.subscribe("state.match",e.proxy(this.setState,this)),this.elements.options.on("click","."+r.links,e.proxy(this.setAction,this))},setMenu:function(e){var t=this.elements.options.hasClass(r.menu),n=t?this.height.min:this.height.max;this.elements.options.css({height:n}).toggleClass(r.menu),t&&(this.setContent(e),e.closest("li").prependTo(this.elements.list))},setAction:function(t){var n=e(t.currentTarget),i=this.elements.options.hasClass(r.mobile)?"setMenu":"setContent";t.preventDefault(),this[i](n)},setContent:function(t){var n=e(t.attr("href"));this.elements.links.removeClass(r.active),this.elements.contents.hide(),t.addClass(r.active),n.show()},setState:function(e){var t=e.replace("state.match.","")==="xxs"?"addClass":"removeClass";this.elements.options[t](r.mobile),this.setHeight()}},i}),WILEY.define("modules/main-article",["modules/figures"],function(e){"use strict";e()}),WILEY.define("modules/rights-link",["common/modules/jquery-loader"],function(e){"use strict";var t={directories:"no",height:550,location:"no",menubar:"no",resizable:"yes",scrollbars:"yes",status:"no",toolbar:"no",width:650},n=function(){var e="",n;for(n in t)t.hasOwnProperty(n)&&(e+=n+"="+t[n]+",");return e},r=function(t){this.element=e(t),this.element.on("click",e.proxy(this.setWindow,this))};return r.prototype={setWindow:function(e){e.preventDefault(),window.open(this.element.attr("href"),"RightsLink",n())}},r}),WILEY.define("modules/statistics",["common/modules/jquery-loader","common/modules/modal"],function(e,t){"use strict";var n='<span class="form__error">Please ensure you accept the Terms and Conditions</span>',r=function(t){this.options={title:"Download Statistical Data",fixedPane:!1,resize:!0,size:"small",showCloseButton:!0},this.element=e(t),this.element.on("click touchstart",e.proxy(this.getContent,this))};return r.prototype={resetState:function(){this.input.attr("checked",!1),this.button.attr("disabled",!0).addClass("button--disabled"),this.form.on("submit",e.proxy(this.validate,this)),this.input.on("change",e.proxy(this.setButton,this))},getContent:function(n){n.preventDefault(),this.html?(this.resetState(),t.open(this.options)):(t.open(this.options),e.get(this.element.attr("href"),e.proxy(function(n){this.html=e(n).find("#js__ajax-fragment"),this.form=this.html.find("form"),this.hidden=this.form.find("#js__download-url"),this.input=this.form.find(".form__field--checkbox"),this.button=this.form.find("button"),this.options.html=this.html,this.resetState(),t.update(this.options)},this)))},setButton:function(){var e;this.input.is(":checked")?(e=!1,this.button.removeClass("button--disabled")):(e=!0,this.button.addClass("button--disabled")),this.button.attr("disabled",e)},validate:function(e){e.preventDefault(),this.form.find(".form__error").remove(),this.input.is(":checked")?(this.form[0].submit(),setTimeout(t.close,0)):this.input.closest(".form__row").prepend(n)}},r}),WILEY.define("modules/table",["common/modules/jquery-loader","common/facades/pubsub","common/modules/utilities","common/facades/scrollable"],function(e,t,n){"use strict";var r={count:0,threshold:15,isThreshhold:function(){return r.count<=r.threshold}},i=n.isIE(8),s=Modernizr.touch?"touchstart":"click",o={analysis:"article-section--data-analyses",caption:"table__caption",cell:"table__data",chevron:"icon__double-chevron-toggle",content:"table__content--clone",clone:"table__row--clone",figure:"article-section--inline-figure",icon:"icon",image:"table__image--clone",images:"figureLink",link:"table__toggle-link",row:"table__row",sections:{article:"article-section",table:"table--article-section"},table:"table__overflow",toggle:"icon__double-chevron-toggle--expanded"},u=function(){var t={};e("#main-content").on(s,".article-section a.figureLink",function(n){n.preventDefault(),t.table=t.table||e("."+o.analysis).find("."+o.sections.table+" a.figureLink"),t.related=t.table.filter("[href="+e(this).attr("href")+"]").first(),e(n.currentTarget).hasClass("table__toggle-link")||t.related.trigger(s)})},a=function(e){var t="";switch(e){case"row":t+='<tr class="'+o.row+" "+o.clone+'">',t+='<td class="'+o.cell+'"></td>',t+="</tr>";break;case"icon":t+='<span class="'+o.icon+" "+o.chevron+'"></span>';break;case"header":t+="<header></header>"}return t},f=function(){this.links.length&&(this.links.one(s,e.proxy(this.setContent,this)),this.links.on(s,e.proxy(this.setDisplay,this))),t.subscribe("resizing",e.proxy(this.setWidth,this))},l=function(){var t=e(a("header")),n=this.root.find("table"),r=this.root.find("."+o.caption);r.length&&(t.attr({id:n.attr("id"),"class":r.attr("class")}).prepend(r.html()).insertBefore(this.root),r.remove(),n.removeAttr("id")),this.links.addClass(o.link).prepend(a("icon"))},c=function(t){this.root=e(t),this.links=this.root.find("."+o.images),r.count++,l.call(this),f.call(this),r.isThreshhold()&&Modernizr.positionfixed&&this.root.scrollable({cloneX:!0,horizontal:!0,resize:!0,wheel:!1})};return c.prototype={setContent:function(t){var r=e(t.currentTarget),i=r.attr("href").split("#")[1],s=e("#"+i),u=s.clone(!0),f=e(a("row")),l=r.closest("."+o.row).children(),c=l.attr("colspan")?l.attr("colspan"):l.length;t.preventDefault(),s.find("."+o.table).length||u.addClass(o.image).width(this.getWidth()),u.addClass(o.content),s.replaceWith(n.uniqueifyHTML(s)),f.children().attr("colspan",c).append(u.hide()),f.hide().insertAfter(r.closest("."+o.row)),r.data("section",f)},setDisplay:function(t){var n=e(t.currentTarget),i=n.data("section"),s=Modernizr.touch?"toggle":"slideToggle",u=Modernizr.touch?0:250,a=function(){r.isThreshhold()&&Modernizr.positionfixed&&this.root.scrollable("update")};t.preventDefault(),i[s](u),i.find("."+o.content)[s](u,e.proxy(a,this)),n.find("."+o.icon).toggleClass(o.toggle)},getWidth:function(){return this.root.width()-40},setWidth:function(){this.root.find("."+o.image).width(this.getWidth())}},u(),c}),WILEY.define("modules/textresize",["common/modules/jquery-loader","common/modules/storage","common/modules/controller","common/modules/utilities","common/facades/pubsub","common/facades/analytics","common/facades/ranger"],function(e,t,n,r,i,s){"use strict";var o={access:"is-accessible",icon:{"default":"icon","control-s":"icon__letter icon__letter--small","control-l":"icon__letter icon__letter--big",tool:"icon__tool icon__tool--textsize"},input:"ranger",module:"js-module",container:"text-resize",label:"article-tools__tool-text",text:["text--xsml","text--sml","text","text--lrg","text--xlrg"],tools:{link:"article-tools__tool-link"}},u=9,a=Math.round(u/2),f=function(){return/extra-small/.test(r.getViewState())},l={body:e("body")},c={end:"Bigger",key:"text-size",label:"Text size",start:"Smaller"},h="",p=function(){var e=Math.floor(parseInt(h,10)/Math.round(u/o.text.length));return e},d=function(t){var n="";switch(t){case"link":n+='<a href="#'+o.container+'" ',n+='class="'+o.tools.link+" "+o.module+'" ',n+='data-module="common_overlay" ',n+='data-overlay="medium" ',n+='data-state="persist" ',n+='data-title="'+c.label+'"',n+=">",n+='<span class="'+o.icon["default"]+" "+o.icon.tool+'"></span>',n+='<span class="'+o.label+'">'+c.label+"</span>",n+="</a>";break;case"content":n+='<form action="#" id="'+o.container+'" class="'+o.container+" "+o.module+' overlay__content" data-module="textresize">',n+='<span class="'+o.icon["default"]+" "+o.icon["control-s"]+'"></span>',n+='<label for="'+o.container+"-"+o.input+'" class="'+o.access+'">'+c.label+"</label>",n+='<input id="'+o.container+"-"+o.input+'" type="range" class="'+o.input+'" name="'+c.key+'" min="1" max="'+u+'" step="1" value="'+a+'">',n+='<span class="'+o.icon["default"]+" "+o.icon["control-l"]+'"></span>',n+="</form>"}return e(n)},v=function(){var e=o.text[p()];l.body.removeClass(e)},m=function(){var e={0:"Extra small",1:"Small",2:"Medium",3:"Large",4:"Extra large"},t=e[p()];s.set({name:"articleTextResize",data:{articleTextSize:t}})},g=function(){var e=l.input?l.input.val():h,n;v(),h=e,n=o.text[p()],l.body.addClass(n),t.set(c.key,e)},y=function(){l.input.attr("min",f()?a:0)},b=function(){i.unsubscribe("state.unmatch.xxs",y),i.unsubscribe("state.match.xxs",y),m()},w=function(){i.subscribe("state.unmatch.xxs",y),i.subscribe("state.match.xxs",y),i.once("overlay:off",b),i.once("modal.close",b)},E=function(e){l.input=e.find("."+o.input),y(),l.input.val(h).ranger(),l.input.on("change",g),w()},S=function(e){e.preventDefault(),l.list.append(d("content"))},x=function(r){var i=t.get(c.key);l.list=e(r),l.link=d("link"),h=i||a,g(),l.link.one("click",S),n.set(l.link[0]),l.list.empty().prepend(l.link)};return function(t){t=e(t),t.is("li")?x(t):E(t)}});